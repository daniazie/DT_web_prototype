{% extends 'base-login.html' %}

{% block head %}

<style>
    body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        background-color: #fefbea;
    }

    .container {
        width: 100%;
        margin: 20px;
        border-radius: 10px;
        padding-left: 20px;
        padding-top: 10px;
        padding-right: 20px;
        background-color: white;
        display: flex;
        flex-direction: column;
        align-items: center;
    }

    .profile-section {
        width: 100%;
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 20px;
        position: relative;
    }

    .profile-info {
        display: flex;
        align-items: center;
        cursor: pointer;
    }

    .profile-info img {
        width: 50px;
        height: 50px;
        border-radius: 50%;
        margin-right: 10px;
    }
    
    .btn-container {
        display: flex;
    }

    .message-btn {
        background-color: #007bff;
        color: #fff;
        border: none;
        border-radius: 4px;
        padding: 10px 20px;
        cursor: pointer;
        font-size: 16px;
        margin: 0px 10px;
        cursor: pointer;
    }

    .favorite-icon {
        margin: 0px 10px;
        width: 30px;
        height: 30px;
        cursor: pointer;
    }

    .translate-icon {
        margin: 0px 10px;
        width: 30px;
        height: 30px;
        cursor: pointer;
    }

    .delete-icon {
        margin: 0px 10px;
        width: 30px;
        height: 30px;
        cursor: pointer;
    }

    .details-section {
        width: 100%;
        display: flex;
        justify-content: space-between;
        align-items: center;
        position: relative;
    }

    .icons-column {
        display: flex;
        flex-direction: column;
        align-items: flex-start;
        margin-top: 20px;
        margin-left: 20px;
    }

    .icon-row {
        display: flex;
        align-items: center;
        margin-bottom: 10px;
    }

    .icon-row img {
        width: 30px;
        height: 30px;
        margin-right: 10px;
    }

    .icon-row span {
        font-size: 16px;
    }

    .body-text {
        width: 80%;
        margin: 20px;
        font-size: 24px;
    }

    .pict-attached {
        max-width: 100%;
        margin: 0;
        width: 200px;
        height: 200px;
        
    }

</style>

{% endblock %}

{% block body %}

<body>
    <div class="container">
        <div class="profile-section">
            <div class="profile-info" onclick="location.href='/user_profile'">
                <img src="../static/profile.png" alt="Profile Picture">
                <div class="id">{{post.writer}}</div>
            </div>
            
            <div class="btn-container">
                {% if user.id != post.writer %}
                <button class="message-btn" id="send_message">Message</button>
                {% endif %}
                <img src="../static/star.png" alt="Favorite" class="favorite-icon">
                <img src="../static/globe.png" alt="Translate" id="openTranslationPopup" class="translate-icon">
                {% if user.id == post.writer %}
                <img src="../static/globe.png" alt="Delete" id="post-delete" class="delete-icon">
                {% endif %}
            </div>
        </div>
        <div class="details-section">
            <div class="icons-column">
                <div class="icon-row">
                    <img src="../static/organization.png" alt="Organization">
                    <span>{{post.job_info.workplace}}</span>
                </div>
                <div class="icon-row">
                    <img src="../static/location.png" alt="Location">
                    <span>{{post.job_info.location}}</span>
                </div>
                <div class="icon-row">
                    <img src="../static/clock.png" alt="Time">
                    <span>{{post.job_info.working_days}} {{post.job_info.working_hours}}</span>
                </div>
                <div class="icon-row">
                    <img src="../static/globe.png" alt="Language">
                    <span>{{post.job_info.lang_level}}</span>
                </div>
            </div>
            <img src="../static/blank.png" alt="Image" class="pict-attached">
        </div>  
        <div class="body-text">
            <p>{{post_content.content}}</p>
        </div>
    </div>
</body>

{% if user.id == post.writer %}
    <script>
        document.getElementById('post-delete').addEventListener('click', () => {
            const result = confirm("정말로 삭제하시겠습니까?");
            if (result) {
                location.href = "post_detail/delete?post_id={{post.post_id}}";
            }
        });
    </script>
{% else %}
    <script>
        send_message.onclick = function() {
            location.href = "messages/room/redirect?uid1={{user.id}}&uid2={{post.writer}}";
        }
    </script>
{% endif %}

<script>
    // document.addEventListener('DOMContentLoaded', () => {
    //     // Create the translation popup HTML and append it to the body
    //     const translationPopupHTML = `
    //         <div id="translationPopup" class="popup">
    //             <div class="popup-content">
    //                 <span class="close">&times;</span>
    //                 <p>Select the language to translate to.</p>
    //                 <select id="languageSelect">
    //                     <option value="">Choose Language</option>
    //                     <option value="English">English</option>
    //                     <option value="Spanish">Spanish</option>
    //                     <option value="French">French</option>
    //                     <option value="German">German</option>
    //                     <!-- Add more options as needed -->
    //                 </select>
    //                 <button id="translateBtn">Translate</button>
    //             </div>
    //         </div>
    //     `;
    //     document.body.insertAdjacentHTML('beforeend', translationPopupHTML);

    //     // Get the translation popup
    //     const translationPopup = document.getElementById('translationPopup');

    //     // Get the button that opens the translation popup
    //     const openTranslationPopup = document.getElementById('openTranslationPopup');

    //     // Get the <span> element that closes the translation popup
    //     const translationCloseBtn = translationPopup.getElementsByClassName('close')[0];

    //     // When the user clicks the button, open the translation popup
    //     openTranslationPopup.onclick = function() {
    //         translationPopup.style.display = 'block';
    //     }

    //     // When the user clicks on <span> (x), close the translation popup
    //     translationCloseBtn.onclick = function() {
    //         translationPopup.style.display = 'none';
    //     }

    //     // When the user clicks anywhere outside of the translation popup, close it
    //     window.onclick = function(event) {
    //         if (event.target == translationPopup) {
    //             translationPopup.style.display = 'none';
    //         }
    //     }

    //     // Translate button click event
    //     document.getElementById('translateBtn').addEventListener('click', () => {
    //         const selectedLanguage = document.getElementById('languageSelect').value;
    //         if (selectedLanguage !== "") {
    //             alert('Translating to ' + selectedLanguage);
    //             // Implement the translation logic here
    //             translationPopup.style.display = 'none';
    //         } else {
    //             alert('Please select a language');
    //         }
    //     });
    // });

    // Styles for the popup
    const style = document.createElement('style');
    style.innerHTML = `
        .popup {
            display: none;
            position: fixed;
            z-index: 1;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgb(0,0,0);
            background-color: rgba(0,0,0,0.4);
        }
        .popup-content {
            background-color: #fefbea;
            margin: 15% auto;
            padding: 20px;
            border: 1px solid #888;
            border-radius: 5px;
            width: 80%;
            max-width: 400px;
            text-align: center;
            position: relative;
        }
        .popup .close {
            position: absolute;
            top: 10px;
            right: 25px;
            color: #aaa;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }
        .popup .close:hover,
        .popup .close:focus {
            color: black;
            text-decoration: none;
            cursor: pointer;
        }
        .popup select {
            width: 100%;
            padding: 10px;
            margin: 15px 0;
        }
        .popup button {
            padding: 10px 20px;
            background-color: black;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        .popup button:hover {
            background-color: #aaa;
        }
    `;
    document.head.appendChild(style);
</script>

{% endblock %}

</html>
